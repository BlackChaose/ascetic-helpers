"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _lodash = require("lodash");

// todo add promise!!!
const sendRequest = url => {
  /* eslint-disable */
  const xhttp = new XMLHttpRequest();
  /* eslint-enable */

  const req = new Promise((resolve, reject) => {
    xhttp.onreadystatechange = function () {
      if (this.readyState === 4 && this.status === 200) {
        // eslint-disable-line
        const result = xhttp.responseText;
        resolve(JSON.parse(result));
      } else if (this.readyState === 4 && this.status !== 200) {
        reject(new Error(`Error! ${this.readyState} ${this.status}`));
      }
    };

    xhttp.open('POST', url, true);
    xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xhttp.send('mobile_codes=get');
  });
  return req;
};

const renderLabel = obj => {
  const labelInput = document.createElement('label'); // eslint-disable-line

  labelInput.for = obj.getElementsByTagName('input').id;
  labelInput.textContent = ' +';
  obj.append(labelInput);
  return obj;
};

const renderMobileInput = config => {
  console.log('!', config, 'version lodash: ', _lodash._.VERSION);
  sendRequest(config.url).then(obj => {
    console.log(obj);
    renderLabel(config.domObject);
  }).catch(error => console.log(error));
  return 0;
};

var _default = renderMobileInput;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tb2JpbGVJbnB1dENvbXBvbmVudC5qcyJdLCJuYW1lcyI6WyJzZW5kUmVxdWVzdCIsInVybCIsInhodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJyZXEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXN1bHQiLCJyZXNwb25zZVRleHQiLCJKU09OIiwicGFyc2UiLCJFcnJvciIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsInJlbmRlckxhYmVsIiwib2JqIiwibGFiZWxJbnB1dCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImZvciIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaWQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZCIsInJlbmRlck1vYmlsZUlucHV0IiwiY29uZmlnIiwiY29uc29sZSIsImxvZyIsIl8iLCJWRVJTSU9OIiwidGhlbiIsImRvbU9iamVjdCIsImNhdGNoIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBLE1BQU1BLFdBQVcsR0FBSUMsR0FBRCxJQUFTO0FBQzNCO0FBQ0EsUUFBTUMsS0FBSyxHQUFHLElBQUlDLGNBQUosRUFBZDtBQUNBOztBQUNBLFFBQU1DLEdBQUcsR0FBRyxJQUFJQyxPQUFKLENBQWEsQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQzVDTCxJQUFBQSxLQUFLLENBQUNNLGtCQUFOLEdBQTJCLFlBQVk7QUFDckMsVUFBSSxLQUFLQyxVQUFMLEtBQW9CLENBQXBCLElBQXlCLEtBQUtDLE1BQUwsS0FBZ0IsR0FBN0MsRUFBa0Q7QUFBRTtBQUNsRCxjQUFNQyxNQUFNLEdBQUdULEtBQUssQ0FBQ1UsWUFBckI7QUFDQU4sUUFBQUEsT0FBTyxDQUFDTyxJQUFJLENBQUNDLEtBQUwsQ0FBV0gsTUFBWCxDQUFELENBQVA7QUFDRCxPQUhELE1BR08sSUFBSSxLQUFLRixVQUFMLEtBQW9CLENBQXBCLElBQXlCLEtBQUtDLE1BQUwsS0FBZ0IsR0FBN0MsRUFBa0Q7QUFDdkRILFFBQUFBLE1BQU0sQ0FBQyxJQUFJUSxLQUFKLENBQVcsVUFBUyxLQUFLTixVQUFXLElBQUcsS0FBS0MsTUFBTyxFQUFuRCxDQUFELENBQU47QUFDRDtBQUNGLEtBUEQ7O0FBUUFSLElBQUFBLEtBQUssQ0FBQ2MsSUFBTixDQUFXLE1BQVgsRUFBbUJmLEdBQW5CLEVBQXdCLElBQXhCO0FBQ0FDLElBQUFBLEtBQUssQ0FBQ2UsZ0JBQU4sQ0FBdUIsY0FBdkIsRUFBdUMsbUNBQXZDO0FBQ0FmLElBQUFBLEtBQUssQ0FBQ2dCLElBQU4sQ0FBVyxrQkFBWDtBQUNELEdBWlcsQ0FBWjtBQWFBLFNBQU9kLEdBQVA7QUFDRCxDQWxCRDs7QUFvQkEsTUFBTWUsV0FBVyxHQUFJQyxHQUFELElBQVM7QUFDM0IsUUFBTUMsVUFBVSxHQUFHQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBbkIsQ0FEMkIsQ0FDeUI7O0FBQ3BERixFQUFBQSxVQUFVLENBQUNHLEdBQVgsR0FBaUJKLEdBQUcsQ0FBQ0ssb0JBQUosQ0FBeUIsT0FBekIsRUFBa0NDLEVBQW5EO0FBQ0FMLEVBQUFBLFVBQVUsQ0FBQ00sV0FBWCxHQUF5QixJQUF6QjtBQUNBUCxFQUFBQSxHQUFHLENBQUNRLE1BQUosQ0FBV1AsVUFBWDtBQUNBLFNBQU9ELEdBQVA7QUFDRCxDQU5EOztBQVFBLE1BQU1TLGlCQUFpQixHQUFJQyxNQUFELElBQVk7QUFDcENDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLEdBQVosRUFBaUJGLE1BQWpCLEVBQXlCLGtCQUF6QixFQUE2Q0csVUFBRUMsT0FBL0M7QUFDQWxDLEVBQUFBLFdBQVcsQ0FBQzhCLE1BQU0sQ0FBQzdCLEdBQVIsQ0FBWCxDQUNHa0MsSUFESCxDQUNTZixHQUFELElBQVM7QUFBRVcsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlaLEdBQVo7QUFBa0JELElBQUFBLFdBQVcsQ0FBQ1csTUFBTSxDQUFDTSxTQUFSLENBQVg7QUFBZ0MsR0FEckUsRUFFR0MsS0FGSCxDQUVVQyxLQUFELElBQVdQLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTSxLQUFaLENBRnBCO0FBR0EsU0FBTyxDQUFQO0FBQ0QsQ0FORDs7ZUFRZVQsaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfIH0gZnJvbSAnbG9kYXNoJztcblxuLy8gdG9kbyBhZGQgcHJvbWlzZSEhIVxuY29uc3Qgc2VuZFJlcXVlc3QgPSAodXJsKSA9PiB7XG4gIC8qIGVzbGludC1kaXNhYmxlICovXG4gIGNvbnN0IHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIC8qIGVzbGludC1lbmFibGUgKi9cbiAgY29uc3QgcmVxID0gbmV3IFByb21pc2UoKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSA0ICYmIHRoaXMuc3RhdHVzID09PSAyMDApIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICBjb25zdCByZXN1bHQgPSB4aHR0cC5yZXNwb25zZVRleHQ7XG4gICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZShyZXN1bHQpKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5yZWFkeVN0YXRlID09PSA0ICYmIHRoaXMuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRXJyb3IhICR7dGhpcy5yZWFkeVN0YXRlfSAke3RoaXMuc3RhdHVzfWApKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHhodHRwLm9wZW4oJ1BPU1QnLCB1cmwsIHRydWUpO1xuICAgIHhodHRwLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICB4aHR0cC5zZW5kKCdtb2JpbGVfY29kZXM9Z2V0Jyk7XG4gIH0pKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbmNvbnN0IHJlbmRlckxhYmVsID0gKG9iaikgPT4ge1xuICBjb25zdCBsYWJlbElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBsYWJlbElucHV0LmZvciA9IG9iai5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKS5pZDtcbiAgbGFiZWxJbnB1dC50ZXh0Q29udGVudCA9ICcgKyc7XG4gIG9iai5hcHBlbmQobGFiZWxJbnB1dCk7XG4gIHJldHVybiBvYmo7XG59O1xuXG5jb25zdCByZW5kZXJNb2JpbGVJbnB1dCA9IChjb25maWcpID0+IHtcbiAgY29uc29sZS5sb2coJyEnLCBjb25maWcsICd2ZXJzaW9uIGxvZGFzaDogJywgXy5WRVJTSU9OKTtcbiAgc2VuZFJlcXVlc3QoY29uZmlnLnVybClcbiAgICAudGhlbigob2JqKSA9PiB7IGNvbnNvbGUubG9nKG9iaik7IHJlbmRlckxhYmVsKGNvbmZpZy5kb21PYmplY3QpOyB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XG4gIHJldHVybiAwO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyTW9iaWxlSW5wdXQ7XG4iXX0=